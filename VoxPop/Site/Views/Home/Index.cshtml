@model IEnumerable<Site.Models.BlogPostEntity>
@{
    ViewBag.Title = "Index";
}

<h2>Home</h2>


@if (@Model != null)
{
    foreach (var blogPost in Model)
    {
        <h2>@Html.ActionLink(blogPost.BlogTitle, "GenericStory", "Home", new { rowKey = blogPost.RowKey, partitionKey = blogPost.PartitionKey }, null)</h2>
        <p>@blogPost.BlogContent</p>
        foreach (var pollItem in blogPost.Poll)
        {
            <h4>@pollItem.Key :</h4>
            <span>@pollItem.Value</span>
            using(Html.BeginForm("Vote", "Home"))
            {
                <input type="hidden" name="pollItemKey" value=@pollItem.Key >
                <input type="hidden" name="blogPostPartitionKey" value=@blogPost.PartitionKey >
                <input type="hidden" name="blogPostRowKey" value=@blogPost.RowKey >
                <input type="submit" value="+1" >
            }
        }
    }
}
